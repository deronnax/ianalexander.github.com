<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>
        ianalexandr.com full text feed    </title>
        <link href="blog/atom.xml" rel="self" />
    
        <link href="/"/>
    
        
    <updated>2013-04-11T09:16:31Z</updated>

    <id>/blog/atom.xml/</id>

            <entry>
            <title type="html">Building a True OAuth 2.0 API with Django and Tasty Pie</title>
            <author><name>Ian Alexander</name></author>
            <link href="/blog/building-a-true-oauth-20-api-with-django-and-tasty-pie.html"/>
            <updated>2013-04-10T22:00:00Z</updated>
            <published>2013-04-10T22:00:00Z</published>
            <id>/blog/building-a-true-oauth-20-api-with-django-and-tasty-pie.html</id>
            
            <content type="html">
                                &lt;p&gt;Almost a year ago PyDanny wrote a great article entitled &amp;#8220;&lt;a href=&#34;http://pydanny.com/the-sorry-state-of-python-oauth-providers.html&#34;&gt;The Sorry State of Python OAuth Providers&lt;/a&gt;&amp;#8221; detailing the abysmal state of OAuth in Python. One year later we have a few more options, and here I am going to detail how I made a django-based OAuth 2.0 &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt; with Tasty&amp;nbsp;Pie.&lt;/p&gt;
&lt;h2&gt;Getting&amp;nbsp;Started&lt;/h2&gt;
&lt;p&gt;First things first, I cannot recommend enough the &lt;a href=&#34;https://github.com/Mashape/mashape-oauth/blob/master/FLOWS.md&#34;&gt;Mashape OAuth Bible&lt;/a&gt; enough. It is currently the most comprehensive document I have found covering both OAuth 1 and 2, and the various flows involved with each. Read up before you get started! We&amp;#8217;ll be using various components to put our &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt;&amp;nbsp;together:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CaffieneHit&amp;#8217;s &lt;a href=&#34;https://github.com/caffeinehit/django-oauth2-provider&#34;&gt;django-oauth2-provider&lt;/a&gt; library will provide out-of-the-box OAuth provisioning&amp;nbsp;capabilities &lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tastypieapi.org/&#34;&gt;Tasty Pie&lt;/a&gt; will create the&amp;nbsp;&lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;My &lt;a href=&#34;https://github.com/ianalexander/django-oauth2-tastypie&#34;&gt;django-oauth2-tastypie&lt;/a&gt; library will marry the two&amp;nbsp;together&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I&amp;#8217;ll be using the classic django &amp;#8220;Polls and Choices&amp;#8221; models as my&amp;nbsp;examples.&lt;/p&gt;
&lt;h2&gt;Setting up&amp;nbsp;Django&lt;/h2&gt;
&lt;p&gt;First things first, we need to create a new django project and create the essential&amp;nbsp;models.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;django-admin.py startproject mysite&lt;br /&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;cd &lt;/span&gt;mysite/&lt;br /&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;python manage.py startapp polls&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/polls/models.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;question&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;pub_date&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DateTimeField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;date published&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__unicode__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;question&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Choice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;poll&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ForeignKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;choice_text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;votes&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IntegerField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__unicode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choice_text&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/polls/settings.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;django.contrib.admin&amp;#39;&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;polls&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Make sure you also add your database configuration and syncdb to add a new user. No surprises&amp;nbsp;here!&lt;/p&gt;
&lt;h2&gt;Setting up the&amp;nbsp;Provider&lt;/h2&gt;
&lt;p&gt;First we&amp;#8217;re going to install the&amp;nbsp;provider.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;sudo pip install django-oauth2-provider&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Next, add the two lines to add the default providers (which should be fine for most&amp;nbsp;use-cases).&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/polls/settings.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;django.contrib.admin&amp;#39;&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;polls&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;provider&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;provider.oauth2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Include provider.oauth2.urls into your urls.py file (&lt;code&gt;namespace=&#39;oauth2&#39;&lt;/code&gt; is required!). Uncomment the admin lines at the top of the file for ease of working with tokens and&amp;nbsp;clients.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/polls/urls.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.contrib&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;admin&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;admin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;autodiscover&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;r&amp;#39;^oauth2/&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;provider.oauth2.urls&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;oauth2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Finally, use the admin console to add a new Client. Or you can do it&amp;nbsp;programatically:&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;provider.oauth2.models&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Client&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.contrib.auth.models&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;User&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;mysite client&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;client_type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;http://ianalexandr.com&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client_id&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;go&#34;&gt;&amp;#39;d63f53a7a6cceba04db5&amp;#39;&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client_secret&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;go&#34;&gt;&amp;#39;afe899288b9ac4127d57f2f12ac5a49d839364dc&amp;#39;&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python console session&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;h2&gt;Testing the&amp;nbsp;Provider&lt;/h2&gt;
&lt;p&gt;Now we can launch the server and test the OAuth Provider. We&amp;#8217;ll be using the &lt;a href=&#34;https://github.com/Mashape/mashape-oauth/blob/master/FLOWS.md#oauth-2-two-legged&#34;&gt;Two-Legged Resource Owner Password&lt;/a&gt;&amp;nbsp;flow.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;python manage.py runserver&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl -d &lt;span class=&#34;s2&#34;&gt;&amp;quot;client_id=d63f53a7a6cceba04db5&amp;amp;client_secret=afe899288b9ac4127d57f2f12ac5a49d839364dc&amp;amp;grant_type=password&amp;amp;username=ian&amp;amp;password=straightflexin&amp;amp;scope=write&amp;quot;&lt;/span&gt; http://localhost:8000/oauth2/access_token&lt;br /&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;access_token&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;a832106c17d00fd3b9094181c598820ef3ff76f4&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;scope&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;read write&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;expires_in&amp;quot;&lt;/span&gt;: 86399, &lt;span class=&#34;s2&#34;&gt;&amp;quot;refresh_token&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;bfdbd5510ae724a2dbd458e68274ab5c8590d3e4&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;If you see the access_token, viola! It&amp;#8217;s working! Verify the access_token is stored in your&amp;nbsp;database:&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;provider.oauth2.models&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AccessToken&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AccessToken&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;go&#34;&gt;[&amp;lt;AccessToken: a832106c17d00fd3b9094181c598820ef3ff76f4&amp;gt;]&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python console session&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;h2&gt;Setting up the&amp;nbsp;&lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;Now let&amp;#8217;s add Tasty Pie to the mix. First things&amp;nbsp;first:&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;sudo pip install django-tastypie&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/polls/settings.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;django.contrib.admin&amp;#39;&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;polls&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;provider&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;provider.oauth2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;s&#34;&gt;&amp;#39;tastypie&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Now we need to add the appropriate Resources to our to our application. I like to use &lt;code&gt;polls/api.py&lt;/code&gt; but these classes can live anywhere. Once the Resources are created, we&amp;#8217;ll add them to our &lt;code&gt;urls.py&lt;/code&gt; using the &lt;code&gt;Api()&lt;/code&gt; class to bind multiple resources&amp;nbsp;together.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/polls/api.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tastypie.resources&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelResource&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;polls.models&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Choice&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tastypie&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ChoiceResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ModelResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;queryset&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Choice&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;resource_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;choice&amp;#39;&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;PollResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ModelResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;choices&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ToManyField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ChoiceResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;choice_set&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;queryset&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Poll&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;resource_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;poll&amp;#39;&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/mysite/urls.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.conf.urls&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;patterns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.contrib&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;admin&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;admin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;autodiscover&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tastypie.api&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Api&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;polls.api&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;PollResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChoiceResource&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;v1_api&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api_name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;v1&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;v1_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PollResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;v1_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ChoiceResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;n&#34;&gt;urlpatterns&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;patterns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;r&amp;#39;^admin/&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;admin&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;site&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;urls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;r&amp;#39;^oauth2/&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;provider.oauth2.urls&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;namespace&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;oauth2&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;url&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;r&amp;#39;^api/&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v1_api&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;urls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Now let&amp;#8217;s test our our&amp;nbsp;&lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt;!&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl http://127.0.0.1:8000/api/v1/?format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json&lt;br /&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;list_endpoint&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;schema&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/schema/&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;poll&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;list_endpoint&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/poll/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;schema&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/poll/schema/&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Looks like it&amp;#8217;s working, let&amp;#8217;s add an object and test the other&amp;nbsp;endpoints:&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;polls.models&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;datetime&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;question&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;All gold everything?&amp;quot;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pub_date&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choice_set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choice_text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;Chain&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;votes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;go&#34;&gt;&amp;lt;Choice: Choice object&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choice_set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choice_text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;Ring&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;votes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;go&#34;&gt;&amp;lt;Choice: Choice object&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choice_set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;choice_text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;Watch&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;votes&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;go&#34;&gt;&amp;lt;Choice: Choice object&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;gp&#34;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python console session&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl http://127.0.0.1:8000/api/v1/poll/?format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json&lt;br /&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;meta&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;limit&amp;quot;&lt;/span&gt;: 20, &lt;span class=&#34;s2&#34;&gt;&amp;quot;next&amp;quot;&lt;/span&gt;: null, &lt;span class=&#34;s2&#34;&gt;&amp;quot;offset&amp;quot;&lt;/span&gt;: 0, &lt;span class=&#34;s2&#34;&gt;&amp;quot;previous&amp;quot;&lt;/span&gt;: null, &lt;span class=&#34;s2&#34;&gt;&amp;quot;total_count&amp;quot;&lt;/span&gt;: 1&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;objects&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choices&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Chain&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 1, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/1/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Ring&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 2, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/2/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Watch&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 3, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/3/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}]&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 1, &lt;span class=&#34;s2&#34;&gt;&amp;quot;pub_date&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;2013-04-10T12:38:47.337475&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;question&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;All gold everything?&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/poll/1/&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}]}&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;h2&gt;Authenticating with&amp;nbsp;django-oauth2-tastypie&lt;/h2&gt;
&lt;p&gt;Now we have an OAuth 2.0 provider and an &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt;. Next we&amp;#8217;ll need to tell Tasty Pie to accept tokens, and to use django-oauth2-provider to validate the&amp;nbsp;tokens.&lt;/p&gt;
&lt;p&gt;Briefly before we get started: what is the difference between &lt;strong&gt;authentication&lt;/strong&gt; and &lt;strong&gt;authorization&lt;/strong&gt;? &lt;strong&gt;Authentication&lt;/strong&gt; answers the question, &amp;#8220;Who is this person?&amp;#8221; Authentication deals with usernames and passwords, OAuth Tokens, &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt; Keys, and other means of identification. &lt;strong&gt;Authorization&lt;/strong&gt; answers the question &amp;#8220;Is this person allowed to perfom this action&amp;#8221;? Authorizaton deals with permissions, and access&amp;nbsp;limitations.&lt;/p&gt;
&lt;p&gt;First take a look at the &lt;code&gt;OAuth20Authentication&lt;/code&gt; class in &lt;a href=&#34;https://github.com/ianalexander/django-oauth2-tastypie&#34;&gt;django-oauth2-tastypie&lt;/a&gt;. Copy (or clone) &lt;code&gt;authenticate.py&lt;/code&gt; into your &lt;code&gt;mysite/polls/&lt;/code&gt; directory.&lt;/p&gt;
&lt;p&gt;Next, modify your &lt;code&gt;api.py&lt;/code&gt; file to use the new &lt;code&gt;Authentication&lt;/code&gt; class (and the &lt;code&gt;DjangoAuthrorization&lt;/code&gt; class for good&amp;nbsp;measure).&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# mysite/polls/api.py&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tastypie.resources&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ModelResource&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tastypie.authorization&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DjangoAuthorization&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;polls.models&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Choice&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;tastypie&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;authentication&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OAuth20Authentication&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ChoiceResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ModelResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;queryset&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Choice&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;resource_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;choice&amp;#39;&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;authorization&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DjangoAuthorization&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;authentication&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OAuth20Authentication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;PollResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ModelResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;n&#34;&gt;choices&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ToManyField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ChoiceResource&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;choice_set&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;full&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;br /&gt;    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;queryset&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Poll&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;objects&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;resource_name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;poll&amp;#39;&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;authorization&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DjangoAuthorization&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;        &lt;span class=&#34;n&#34;&gt;authentication&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OAuth20Authentication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Python&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Now let&amp;#8217;s try to access our &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt;&amp;nbsp;again.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl -v http://127.0.0.1:8000/api/v1/poll/?format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json&lt;br /&gt;* About to connect&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; to 127.0.0.1 port 8000 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#0)&lt;/span&gt;&lt;br /&gt;*   Trying 127.0.0.1... connected&lt;br /&gt;&amp;gt; &lt;span class=&#34;caps&#34;&gt;GET&lt;/span&gt; /api/v1/poll/?format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json &lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt;/1.1&lt;br /&gt;&amp;gt; User-Agent: curl/7.22.0 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;x86_64-pc-linux-gnu&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3&lt;br /&gt;&amp;gt; Host: 127.0.0.1:8000&lt;br /&gt;&amp;gt; Accept: */*&lt;br /&gt;&amp;gt; &lt;br /&gt;* &lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt; 1.0, assume close after body&lt;br /&gt;&amp;lt; &lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt;/1.0 401 &lt;span class=&#34;caps&#34;&gt;UNAUTHORIZED&lt;/span&gt;&lt;br /&gt;&amp;lt; Date: Thu, 11 Apr 2013 00:25:46 &lt;span class=&#34;caps&#34;&gt;GMT&lt;/span&gt;&lt;br /&gt;&amp;lt; Server: WSGIServer/0.1 Python/2.7.3&lt;br /&gt;&amp;lt; Content-Type: text/html; &lt;span class=&#34;nv&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;utf-8&lt;br /&gt;&amp;lt; &lt;br /&gt;* Closing connection &lt;span class=&#34;c&#34;&gt;#0&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Access Denied! Now let&amp;#8217;s add our Access Token to the Authorize header and try&amp;nbsp;again.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl -v -H &lt;span class=&#34;s2&#34;&gt;&amp;quot;Authorization: OAuth a832106c17d00fd3b9094181c598820ef3ff76f4&amp;quot;&lt;/span&gt; http://127.0.0.1:8000/api/v1/poll/?format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json&lt;br /&gt;* About to connect&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; to 127.0.0.1 port 8000 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#0)&lt;/span&gt;&lt;br /&gt;*   Trying 127.0.0.1... connected&lt;br /&gt;&amp;gt; &lt;span class=&#34;caps&#34;&gt;GET&lt;/span&gt; /api/v1/poll/?format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json &lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt;/1.1&lt;br /&gt;&amp;gt; User-Agent: curl/7.22.0 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;x86_64-pc-linux-gnu&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3&lt;br /&gt;&amp;gt; Host: 127.0.0.1:8000&lt;br /&gt;&amp;gt; Accept: */*&lt;br /&gt;&amp;gt; Authorization: OAuth a832106c17d00fd3b9094181c598820ef3ff76f4&lt;br /&gt;&amp;gt; &lt;br /&gt;* &lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt; 1.0, assume close after body&lt;br /&gt;&amp;lt; &lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt;/1.0 200 &lt;span class=&#34;caps&#34;&gt;OK&lt;/span&gt;&lt;br /&gt;&amp;lt; Date: Thu, 11 Apr 2013 00:27:42 &lt;span class=&#34;caps&#34;&gt;GMT&lt;/span&gt;&lt;br /&gt;&amp;lt; Server: WSGIServer/0.1 Python/2.7.3&lt;br /&gt;&amp;lt; Vary: Accept&lt;br /&gt;&amp;lt; Content-Type: application/json&lt;br /&gt;&amp;lt; Cache-Control: no-cache&lt;br /&gt;&amp;lt; &lt;br /&gt;* Closing connection &lt;span class=&#34;c&#34;&gt;#0&lt;/span&gt;&lt;br /&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;meta&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;limit&amp;quot;&lt;/span&gt;: 20, &lt;span class=&#34;s2&#34;&gt;&amp;quot;next&amp;quot;&lt;/span&gt;: null, &lt;span class=&#34;s2&#34;&gt;&amp;quot;offset&amp;quot;&lt;/span&gt;: 0, &lt;span class=&#34;s2&#34;&gt;&amp;quot;previous&amp;quot;&lt;/span&gt;: null, &lt;span class=&#34;s2&#34;&gt;&amp;quot;total_count&amp;quot;&lt;/span&gt;: 1&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;objects&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choices&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Chain&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 1, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/1/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Ring&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 2, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/2/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Watch&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 3, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/3/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}]&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 1, &lt;span class=&#34;s2&#34;&gt;&amp;quot;pub_date&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;2013-04-10T12:38:47.337475&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;question&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;All gold everything?&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/poll/1/&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}]}&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Success! Let&amp;#8217;s try to post some data. Personally, I prefer gold all in my&amp;nbsp;watch.&lt;/p&gt;
&lt;div class=&#34;codebox&#34;&gt;&lt;figure class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl --dump-header - -H &lt;span class=&#34;s2&#34;&gt;&amp;quot;Authorization: OAuth a832106c17d00fd3b9094181c598820ef3ff76f4&amp;quot;&lt;/span&gt; -H &lt;span class=&#34;s2&#34;&gt;&amp;quot;Content-Type: application/json&amp;quot;&lt;/span&gt; -X put --data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;quot;choice_text&amp;quot;: &amp;quot;Watch&amp;quot;, &amp;quot;id&amp;quot;: 3, &amp;quot;resource_uri&amp;quot;: &amp;quot;/api/v1/choice/3/&amp;quot;, &amp;quot;votes&amp;quot;: 1}&amp;#39;&lt;/span&gt; http://127.0.0.1:8000/api/v1/choice/3/&lt;br /&gt;&lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt;/1.0 204 &lt;span class=&#34;caps&#34;&gt;NO&lt;/span&gt; &lt;span class=&#34;caps&#34;&gt;CONTENT&lt;/span&gt;&lt;br /&gt;Date: Thu, 11 Apr 2013 00:50:34 &lt;span class=&#34;caps&#34;&gt;GMT&lt;/span&gt;&lt;br /&gt;Server: WSGIServer/0.1 Python/2.7.3&lt;br /&gt;Vary: Accept&lt;br /&gt;Content-Length: 0&lt;br /&gt;Content-Type: text/html; &lt;span class=&#34;nv&#34;&gt;charset&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;utf-8&lt;br /&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;curl --dump-header - -H &lt;span class=&#34;s2&#34;&gt;&amp;quot;Authorization: OAuth a832106c17d00fd3b9094181c598820ef3ff76f4&amp;quot;&lt;/span&gt; http://127.0.0.1:8000/api/v1/poll/?format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json&lt;br /&gt;&lt;span class=&#34;caps&#34;&gt;HTTP&lt;/span&gt;/1.0 200 &lt;span class=&#34;caps&#34;&gt;OK&lt;/span&gt;&lt;br /&gt;Date: Thu, 11 Apr 2013 00:51:36 &lt;span class=&#34;caps&#34;&gt;GMT&lt;/span&gt;&lt;br /&gt;Server: WSGIServer/0.1 Python/2.7.3&lt;br /&gt;Vary: Accept&lt;br /&gt;Content-Type: application/json&lt;br /&gt;Cache-Control: no-cache&lt;br /&gt;&amp;nbsp;&lt;br /&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;meta&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;limit&amp;quot;&lt;/span&gt;: 20, &lt;span class=&#34;s2&#34;&gt;&amp;quot;next&amp;quot;&lt;/span&gt;: null, &lt;span class=&#34;s2&#34;&gt;&amp;quot;offset&amp;quot;&lt;/span&gt;: 0, &lt;span class=&#34;s2&#34;&gt;&amp;quot;previous&amp;quot;&lt;/span&gt;: null, &lt;span class=&#34;s2&#34;&gt;&amp;quot;total_count&amp;quot;&lt;/span&gt;: 1&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;objects&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choices&amp;quot;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Chain&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 1, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/1/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Ring&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 2, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/2/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;choice_text&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;Watch&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 3, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/choice/3/&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;votes&amp;quot;&lt;/span&gt;: 1&lt;span class=&#34;o&#34;&gt;}]&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;id&amp;quot;&lt;/span&gt;: 1, &lt;span class=&#34;s2&#34;&gt;&amp;quot;pub_date&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;2013-04-10T12:38:47.337475&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;question&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;All gold everything?&amp;quot;&lt;/span&gt;, &lt;span class=&#34;s2&#34;&gt;&amp;quot;resource_uri&amp;quot;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;quot;/api/v1/poll/1/&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}]}&lt;/span&gt;&lt;br /&gt;&lt;/pre&gt;&lt;/div&gt;&lt;br /&gt;&lt;figcaption&gt;Bash&lt;/figcaption&gt;&lt;/figure&gt;&lt;/div&gt;

&lt;p&gt;Now it shows our updated resource. Our &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt; is now authenticating with OAuth&amp;nbsp;2.0!&lt;/p&gt;
&lt;h2&gt;Next&amp;nbsp;Steps&lt;/h2&gt;
&lt;p&gt;This brief example shows how to get started with your &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt;. Taking your &lt;span class=&#34;caps&#34;&gt;API&lt;/span&gt; to the next level you may have some more&amp;nbsp;questions:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How do I manage the scope of the tokens?&lt;/strong&gt; Token scope for &lt;code&gt;django-oauth2-provider&lt;/code&gt; can be overwritten in your django project&amp;#8217;s &lt;code&gt;settings.py&lt;/code&gt; file. Use the &lt;a href=&#34;https://django-oauth2-provider.readthedocs.org/en/latest/api.html#provider-constants&#34;&gt;&lt;span class=&#34;caps&#34;&gt;SCOPES&lt;/span&gt;&lt;/a&gt; setting to define new token&amp;nbsp;scope.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How do I change the lifetime of my tokens?&lt;/strong&gt; Similar to scope, you can set the token expiry time in the &lt;code&gt;settings.py&lt;/code&gt; as well. Check the &lt;a href=&#34;https://django-oauth2-provider.readthedocs.org/en/latest/api.html#provider-constants&#34;&gt;EXPIRE_DELTA&lt;/a&gt; setting to change the token expiry&amp;nbsp;time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How do I manage authorization permissions?&lt;/strong&gt; &lt;code&gt;DjangoAuthorization()&lt;/code&gt; is a standard Tasty Pie class. Check the &lt;a href=&#34;http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#djangoauthorization&#34;&gt;documentation&lt;/a&gt; and &lt;a href=&#34;https://github.com/toastdriven/django-tastypie/blob/master/tastypie/authorization.py#L130&#34;&gt;source&lt;/a&gt; for more&amp;nbsp;information.&lt;/p&gt;
&lt;h2&gt;Thank&amp;nbsp;you!&lt;/h2&gt;
&lt;p&gt;If you found this useful, please send me a &lt;a href=&#34;https://twitter.com/ianalexan&#34;&gt;tweet&lt;/a&gt; or get in contact with me via the top of the page. Good&amp;nbsp;luck!&lt;/p&gt;            </content>
        </entry>
            <entry>
            <title type="html">Does the Internet really need another Blog?</title>
            <author><name>Ian Alexander</name></author>
            <link href="/blog/does-the-internet-really-need-another-blog.html"/>
            <updated>2013-04-07T22:00:00Z</updated>
            <published>2013-04-07T22:00:00Z</published>
            <id>/blog/does-the-internet-really-need-another-blog.html</id>
            
            <content type="html">
                                &lt;p&gt;After going back and forth for the last couple of months, I&amp;#8217;ve decided to start writing again. One of the main points I wrestled with was, does the internet need another blog? What value can I add? What will readers gain from my perspective? I have decided that this is a narrow&amp;nbsp;view.&lt;/p&gt;
&lt;h2&gt;Writing as Personal&amp;nbsp;Eminence&lt;/h2&gt;
&lt;p&gt;At my current employer, we are heavily encouraged to assist in the creation of &amp;#8220;eminence&amp;#8221; materials for the company. These documents range from whitepapers to POVs to internal educational materials. After I leave, all of my eminence will be tied to these documents, and thus the firm. Writing provides a means to develop personal eminence for ideas and thing I find interesting. This eminence will stay with me regardless of where and how I create&amp;nbsp;it.&lt;/p&gt;
&lt;h2&gt;Writing as Building&amp;nbsp;Focus&lt;/h2&gt;
&lt;p&gt;Unquestionably, writing helps you learn what you are doing. Writing down the steps I&amp;#8217;ve taken to create something helps me better understand what I have actually been doing. From a technical standpoint, documenting the steps taken to produce a given result helps recreate that result in the future, and better understand the inner workings of your finished&amp;nbsp;product.&lt;/p&gt;
&lt;h2&gt;Writing as Personal&amp;nbsp;Growth&lt;/h2&gt;
&lt;p&gt;Writing helps document and visualize your thought process over a long period of time. At the macro level, trends can be observed that would go unnoticed at the day-to-day level. Writing helps shake out the noise, and see the bigger picture in your development as a&amp;nbsp;person.&lt;/p&gt;
&lt;h2&gt;Writing isn&amp;#8217;t just for&amp;nbsp;Education&lt;/h2&gt;
&lt;p&gt;Even if you have no readers, one can realize the above benefits. But, if you have the opportunity to expose your writing to others, you have an opportunity to help give back to the community we are all a part&amp;nbsp;of.&lt;/p&gt;
&lt;p&gt;This is the first post. This blog is powered by &lt;a href=&#34;https://github.com/hyde/hyde&#34;&gt;Hyde&lt;/a&gt;, with a &lt;a href=&#34;http://twitter.github.io/bootstrap/&#34;&gt;Bootstrap&lt;/a&gt; based theme. The font is Calluna from &lt;a href=&#34;http://www.exljbris.com/calluna.html&#34;&gt;Exljbris&lt;/a&gt;. The views and opinions expressed here are mine, and do not reflect the official policy or position of any other persons, organizations, employers, or other&amp;nbsp;party.&lt;/p&gt;            </content>
        </entry>
    </feed>